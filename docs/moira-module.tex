%
% API Documentation for Argyle
% Module moira
%
% Generated by epydoc 3.0.1
% [Tue Mar 19 16:15:08 2013]
%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                          Module Description                           %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

    \index{moira \textit{(module)}|(}
\section{Module moira}

    \label{moira}
MOIRA, the MOIRA Otto-matic Intelligent Reconniter of Assets, is an API for
the Marketwatch Virtual Stock Exchange game.

Code is available on 
Github\footnote{\href{http://github.com/brandonwu/moira}{http://github.com/brandonwu/moira}}.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                               Functions                               %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

  \subsection{Functions}

    \label{moira:get_current_holdings}
    \index{moira \textit{(module)}!moira.get\_current\_holdings \textit{(function)}}

    \vspace{0.5ex}

\hspace{.8\funcindent}\begin{boxedminipage}{\funcwidth}

    \raggedright \textbf{get\_current\_holdings}(\textit{token}, \textit{game})

    \vspace{-1.5ex}

    \rule{\textwidth}{0.5\fboxrule}
\setlength{\parskip}{2ex}
    Fetches and parses current holdings.

\setlength{\parskip}{1ex}
      \textbf{Parameters}
      \vspace{-1ex}

      \begin{quote}
        \begin{Ventry}{xxxxx}

          \item[token]

          Cookiejar returned by a call to \texttt{get\_token}.

          \item[game]

          The \index{name}\textit{name} of the game 
          (marketwatch.com/game/\textit{XXXXXXX}).

        \end{Ventry}

      \end{quote}

      \textbf{Return Value}
    \vspace{-1ex}

      \begin{quote}
      \texttt{Stock} data.

      {\it (type=Dict of \texttt{Stock} objects, keyed by \index{id}\textit{id})}

      \end{quote}

\textbf{Warning:} The stock price returned by a call to \texttt{get\_current\_holdings} is 
rounded to the nearest cent! This results in inaccuracies if you calculate 
things based on this number --- don't. Use \texttt{stock\_search} instead. 
Interestingly, Marketwatch itself never reports the full- precision stock 
price anywhere except in HTML attributes.



    \end{boxedminipage}

    \label{moira:get_portfolio_data}
    \index{moira \textit{(module)}!moira.get\_portfolio\_data \textit{(function)}}

    \vspace{0.5ex}

\hspace{.8\funcindent}\begin{boxedminipage}{\funcwidth}

    \raggedright \textbf{get\_portfolio\_data}(\textit{token}, \textit{game})

    \vspace{-1.5ex}

    \rule{\textwidth}{0.5\fboxrule}
\setlength{\parskip}{2ex}
    Grabs portfolio data.

\setlength{\parskip}{1ex}
      \textbf{Parameters}
      \vspace{-1ex}

      \begin{quote}
        \begin{Ventry}{xxxxx}

          \item[token]

          Cookiejar returned by \texttt{get\_token}.

          \item[game]

          Game name (marketwatch.com/game/\textit{XXXXXXX})

        \end{Ventry}

      \end{quote}

      \textbf{Return Value}
    \vspace{-1ex}

      \begin{quote}
      Portfolio data dictionary

      {\it (type=Dict with net\_worth, overall\_return\_amount, 
      overall\_return\_percent, daily\_return\_percent, purchasing\_power, 
      cash\_left, cash\_borrowed, short\_reserve, rank, and time (last 
      updated).)}

      \end{quote}

\textbf{Note:} I probably won't be making this return a \texttt{Portfolio} object; it 
seems slightly redundant.



    \end{boxedminipage}

    \label{moira:get_token}
    \index{moira \textit{(module)}!moira.get\_token \textit{(function)}}

    \vspace{0.5ex}

\hspace{.8\funcindent}\begin{boxedminipage}{\funcwidth}

    \raggedright \textbf{get\_token}(\textit{username}, \textit{password})

    \vspace{-1.5ex}

    \rule{\textwidth}{0.5\fboxrule}
\setlength{\parskip}{2ex}
    Issues a login request. The token returned by this function is required
    for all methods in this module.

\setlength{\parskip}{1ex}
      \textbf{Parameters}
      \vspace{-1ex}

      \begin{quote}
        \begin{Ventry}{xxxxxxxx}

          \item[username]

          The marketwatch.com username (email).

          \item[password]

          The plaintext marketwatch.com password.

        \end{Ventry}

      \end{quote}

      \textbf{Return Value}
    \vspace{-1ex}

      \begin{quote}
      Requests cookiejar containing authentication token.

      \end{quote}

\textbf{Note:} It's unknown what the expiry time for this token is - it is set to expire 
at end of session. It may be apt to request a new token daily, while the 
market is closed.



    \end{boxedminipage}

    \label{moira:get_transaction_history}
    \index{moira \textit{(module)}!moira.get\_transaction\_history \textit{(function)}}

    \vspace{0.5ex}

\hspace{.8\funcindent}\begin{boxedminipage}{\funcwidth}

    \raggedright \textbf{get\_transaction\_history}(\textit{token}, \textit{game})

    \vspace{-1.5ex}

    \rule{\textwidth}{0.5\fboxrule}
\setlength{\parskip}{2ex}
    DOES NOT FUNCTION YET: Downloads and parses the list of past 
    transactions.

\setlength{\parskip}{1ex}
      \textbf{Parameters}
      \vspace{-1ex}

      \begin{quote}
        \begin{Ventry}{xxxxx}

          \item[token]

          Cookiejar returned by \texttt{get\_token}.

          \item[game]

          The \index{name}\textit{name} of the game 
          (marketwatch.com/game/\textit{XXXXXXX}).

        \end{Ventry}

      \end{quote}

      \textbf{Return Value}
    \vspace{-1ex}

      \begin{quote}
      A dict of all past transactions.

      {\it (type=Dict of \texttt{Trans} objects, keyed on an index (1, 2...).)}

      \end{quote}

    \end{boxedminipage}

    \label{moira:order}
    \index{moira \textit{(module)}!moira.order \textit{(function)}}

    \vspace{0.5ex}

\hspace{.8\funcindent}\begin{boxedminipage}{\funcwidth}

    \raggedright \textbf{order}(\textit{token}, \textit{game}, \textit{type}, \textit{id}, \textit{amt})

    \vspace{-1.5ex}

    \rule{\textwidth}{0.5\fboxrule}
\setlength{\parskip}{2ex}
    Initiates a buy, sell, short, or cover order.

\setlength{\parskip}{1ex}
      \textbf{Parameters}
      \vspace{-1ex}

      \begin{quote}
        \begin{Ventry}{xxxxx}

          \item[token]

          Cookiejar returned by \texttt{get\_token}.

          \item[game]

          Game name (marketwatch.com/game/\textit{XXXXXXX})

          \item[id]

          Security ID (not the ticker symbol). Obtain from 
          \texttt{stock\_search}

          \item[amt]

          Order amount.

          \item[type]

          Type of order - 'Sell', 'Buy', 'Short', or 'Cover'.

        \end{Ventry}

      \end{quote}

      \textbf{Return Value}
    \vspace{-1ex}

      \begin{quote}
      Returns integer - 0 if success, nonzero if failure.

      {\it (type=integer)}

      \end{quote}

\textbf{Warning:} If you have insufficient funds, the server will still respond that the 
order succeeded! Check the order and transaction list to make sure the 
order actually went through.



    \end{boxedminipage}

    \label{moira:stock_search}
    \index{moira \textit{(module)}!moira.stock\_search \textit{(function)}}

    \vspace{0.5ex}

\hspace{.8\funcindent}\begin{boxedminipage}{\funcwidth}

    \raggedright \textbf{stock\_search}(\textit{token}, \textit{game}, \textit{ticker})

    \vspace{-1.5ex}

    \rule{\textwidth}{0.5\fboxrule}
\setlength{\parskip}{2ex}
    Queries Marketwatch for stock price and ID of a given ticker symbol.

\setlength{\parskip}{1ex}
      \textbf{Parameters}
      \vspace{-1ex}

      \begin{quote}
        \begin{Ventry}{xxxxxx}

          \item[token]

          Cookiejar returned by \texttt{get\_token}.

          \item[game]

          Game name (marketwatch.com/game/\textit{XXXXXXX}).

          \item[ticker]

          Ticker symbol of stock to query.

        \end{Ventry}

      \end{quote}

      \textbf{Return Value}
    \vspace{-1ex}

      \begin{quote}
      Current stock price, stock id, and server time.

      {\it (type=Dict \{'price':float, 'id':str, 'time':\textit{datetime} object in 
      EST\}.)}

      \end{quote}

\textbf{Note:} You must have joined a game in order to use this function.



    \end{boxedminipage}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                               Variables                               %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

  \subsection{Variables}

    \vspace{-1cm}
\hspace{\varindent}\begin{longtable}{|p{\varnamewidth}|p{\vardescrwidth}|l}
\cline{1-2}
\cline{1-2} \centering \textbf{Name} & \centering \textbf{Description}& \\
\cline{1-2}
\endhead\cline{1-2}\multicolumn{3}{r}{\small\textit{continued on next page}}\\\endfoot\cline{1-2}
\endlastfoot\raggedright \_\-\_\-p\-a\-c\-k\-a\-g\-e\-\_\-\_\- & \raggedright \textbf{Value:} 
{\tt None}&\\
\cline{1-2}
\raggedright c\-h\- & \raggedright \textbf{Value:} 
{\tt {\textless}logging.StreamHandler object at 0x2dc8a90{\textgreater}}&\\
\cline{1-2}
\raggedright f\-h\- & \raggedright \textbf{Value:} 
{\tt {\textless}logging.FileHandler object at 0x2e395d0{\textgreater}}&\\
\cline{1-2}
\raggedright f\-o\-r\-m\-a\-t\-t\-e\-r\- & \raggedright \textbf{Value:} 
{\tt {\textless}logging.Formatter object at 0x2e39810{\textgreater}}&\\
\cline{1-2}
\raggedright f\-r\-o\-m\-\_\-z\-o\-n\-e\- & \raggedright \textbf{Value:} 
{\tt tzfile('/usr/share/zoneinfo/UTC')}&\\
\cline{1-2}
\raggedright l\-o\-g\-g\-e\-r\- & \raggedright \textbf{Value:} 
{\tt {\textless}logging.Logger object at 0x2dbbf90{\textgreater}}&\\
\cline{1-2}
\raggedright t\-o\-\_\-z\-o\-n\-e\- & \raggedright \textbf{Value:} 
{\tt tzfile('/usr/share/zoneinfo/America/New\_York')}&\\
\cline{1-2}
\end{longtable}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                           Class Description                           %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

    \index{moira \textit{(module)}!moira.Portfolio \textit{(class)}|(}
\subsection{Class Portfolio}

    \label{moira:Portfolio}
Stores portfolio data.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                Methods                                %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

  \subsubsection{Methods}

    \label{moira:Portfolio:__init__}
    \index{moira \textit{(module)}!moira.Portfolio \textit{(class)}!moira.Portfolio.\_\_init\_\_ \textit{(method)}}

    \vspace{0.5ex}

\hspace{.8\funcindent}\begin{boxedminipage}{\funcwidth}

    \raggedright \textbf{\_\_init\_\_}(\textit{self}, \textit{time}, \textit{cash}, \textit{leverage}, \textit{net\_worth}, \textit{purchasing\_power}, \textit{starting\_cash}, \textit{return\_amt}, \textit{rank})

\setlength{\parskip}{2ex}
\setlength{\parskip}{1ex}
      \textbf{Parameters}
      \vspace{-1ex}

      \begin{quote}
        \begin{Ventry}{xxxxxxxxxxxxxxxx}

          \item[time]

          Last updated time (server time from HTTP headers).

          \item[cash]

          Amount of \textit{cash} (not purchasing power!) remaining.

          \item[leverage]

          Amount available to borrow.

          \item[net\_worth]

          Sum of assets and liabilities.

          \item[purchasing\_power]

          Amount (credit + cash) available to buy.

          \item[starting\_cash]

          Cash amount provided at game start.

          \item[return\_amt]

          Dollar amount of returns over \texttt{starting\_cash}.

        \end{Ventry}

      \end{quote}

    \end{boxedminipage}

    \index{moira \textit{(module)}!moira.Portfolio \textit{(class)}|)}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                           Class Description                           %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

    \index{moira \textit{(module)}!moira.Stock \textit{(class)}|(}
\subsection{Class Stock}

    \label{moira:Stock}
Stores portfolio data for a single stock.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                Methods                                %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

  \subsubsection{Methods}

    \label{moira:Stock:__init__}
    \index{moira \textit{(module)}!moira.Stock \textit{(class)}!moira.Stock.\_\_init\_\_ \textit{(method)}}

    \vspace{0.5ex}

\hspace{.8\funcindent}\begin{boxedminipage}{\funcwidth}

    \raggedright \textbf{\_\_init\_\_}(\textit{self}, \textit{id}, \textit{ticker}, \textit{security\_type}, \textit{current\_price}, \textit{shares}, \textit{purchase\_type}, \textit{returns})

\setlength{\parskip}{2ex}
\setlength{\parskip}{1ex}
      \textbf{Parameters}
      \vspace{-1ex}

      \begin{quote}
        \begin{Ventry}{xxxxxxxxxxxxx}

          \item[id]

          Unique ID assigned by Marketwatch to each security.

          \item[ticker]

          The ticker symbol of the stock.

          \item[security\_type]

          "ExchangeTradedFund" or "Stock"

          \item[current\_price]

          Current price per share, \textit{rounded to the cent}.

          \item[shares]

          Number of shares held.

          \item[purchase\_type]

          "Buy" or "Short"

          \item[returns]

          Total return on your investment. @see See the warnings at 
          \texttt{get\_current\_holdings} about price rounding.

        \end{Ventry}

      \end{quote}

    \end{boxedminipage}

    \index{moira \textit{(module)}!moira.Stock \textit{(class)}|)}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                           Class Description                           %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

    \index{moira \textit{(module)}!moira.Trans \textit{(class)}|(}
\subsection{Class Trans}

    \label{moira:Trans}
Stores transaction data for a single transaction.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                Methods                                %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

  \subsubsection{Methods}

    \label{moira:Trans:__init__}
    \index{moira \textit{(module)}!moira.Trans \textit{(class)}!moira.Trans.\_\_init\_\_ \textit{(method)}}

    \vspace{0.5ex}

\hspace{.8\funcindent}\begin{boxedminipage}{\funcwidth}

    \raggedright \textbf{\_\_init\_\_}(\textit{self}, \textit{ticker}, \textit{order\_time}, \textit{trans\_time}, \textit{trans\_type}, \textit{trans\_amt}, \textit{exec\_price})

\setlength{\parskip}{2ex}
\setlength{\parskip}{1ex}
      \textbf{Parameters}
      \vspace{-1ex}

      \begin{quote}
        \begin{Ventry}{xxxxxxxxxx}

          \item[ticker]

          The ticker symbol of the security.

          \item[order\_time]

          The time the order was issued.

          \item[trans\_time]

          The time the order was executed.

          \item[trans\_type]

          "Buy", "Short", "Sell", or "Cover"

          \item[trans\_amt]

          Number of shares sold/purchased.

          \item[exec\_price]

          Price of security at time of order.

        \end{Ventry}

      \end{quote}

    \end{boxedminipage}

    \index{moira \textit{(module)}!moira.Trans \textit{(class)}|)}
    \index{moira \textit{(module)}|)}
